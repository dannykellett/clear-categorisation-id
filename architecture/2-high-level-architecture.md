# 2. High-Level Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                    ClearCategorisationIQ                       │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐    ┌──────────────┐    ┌─────────────────┐     │
│  │   FastAPI   │    │    Kafka     │    │   Google        │     │
│  │  Endpoints  │    │   Consumer   │    │   Sheets        │     │
│  │             │    │              │    │   Taxonomy      │     │
│  └─────────────┘    └──────────────┘    └─────────────────┘     │
│         │                   │                      │            │
│         v                   v                      │            │
│  ┌─────────────────────────────────────────────────v────────┐   │
│  │              Classification Engine              │        │   │
│  │  ┌──────────────┐  ┌────────────────────────────┐      │   │
│  │  │ Provider     │  │ Few-shot Prompt Builder    │      │   │
│  │  │ Adapters     │  │                            │      │   │
│  │  │ - OpenAI     │  │ - Taxonomy Context         │      │   │
│  │  │ - Ollama     │  │ - Example Selection        │      │   │
│  │  └──────────────┘  └────────────────────────────┘      │   │
│  └─────────────────────────────────────────────────────────┘   │
│         │                   │                                  │
│         v                   v                                  │
│  ┌─────────────┐    ┌──────────────┐                          │
│  │   Result    │    │   Kafka      │                          │
│  │ Validation  │    │  Producer    │                          │
│  │             │    │              │                          │
│  └─────────────┘    └──────────────┘                          │
│         │                   │                                  │
│         v                   v                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                PostgreSQL                              │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────────┐ │   │
│  │  │  articles   │  │few_shots    │  │ classifications │ │   │
│  │  │             │  │             │  │                 │ │   │
│  │  └─────────────┘  └─────────────┘  └─────────────────┘ │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘

    External Dependencies:
    ┌─────────────┐  ┌─────────────┐  ┌─────────────┐
    │   Redis     │  │   Kafka     │  │ AI Provider │
    │   Cache     │  │  Cluster    │  │ APIs        │
    └─────────────┘  └─────────────┘  └─────────────┘
```

---
